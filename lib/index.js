!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vtouch-view3d",[],t):"object"==typeof exports?exports["vtouch-view3d"]=t():e["vtouch-view3d"]=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){e.exports=require("cesium")},function(e,t,i){"use strict";i.r(t);var n=i(3);i.d(t,"Camera",(function(){return n.a}));var r=i(4);i.d(t,"cameraController",(function(){return r.a}));var a=i(13);i.d(t,"Cartesian",(function(){return a.a}));var o=i(5);i.d(t,"mapConfig",(function(){return o.a}));var s=i(8);for(var c in s)["default","Camera","cameraController","Cartesian","mapConfig"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(c);var u=i(6);i.d(t,"Sprite",(function(){return u.a}))},function(e,t,i){"use strict";i.r(t);var n=i(11);i.d(t,"API",(function(){return n.a}));var r=i(1);for(var a in r)["default","AppBase","API"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a);var o=i(12);i.d(t,"Provider",(function(){return o.a}));var s=i(10);i.d(t,"AppBase",(function(){return s.a}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0),r=i(1);class a{constructor(e){return this._camera=e.camera,this}get camera(){return this._camera}cameraUpdate(e){const{longitude:t,latitude:i}=r.Cartesian.offset2(e.longitude,e.latitude);this._camera.flyTo({destination:n.Cartesian3.fromDegrees(t,i,r.mapConfig.fireHeight)})}cameraRectangleUpdate(e){const{longitude:t,latitude:i}=r.Cartesian.offset2(e.beginLongitude,e.beginLatitude),{longitude:a,latitude:o}=r.Cartesian.offset2(e.endLongitude,e.endLatitude);console.log(t,i,a,o),this._camera.flyTo({destination:n.Rectangle.fromDegrees(t,i,a,o)})}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0),r=i(1);class a{constructor(e){return this.initChinaViewer=()=>{this._camera.setView({destination:n.Cartesian3.fromDegrees(117.48,30.67,3e7),orientation:{heading:n.Math.toRadians(0),pitch:n.Math.toRadians(-90),roll:0}})},this._camera=e.camera,this.initChinaViewer(),this}get camera(){return this._camera}cameraUpdate(e){const{longitude:t,latitude:i}=r.Cartesian.offset2(e.longitude,e.latitude);this._camera.flyTo({destination:n.Cartesian3.fromDegrees(t,i,r.mapConfig.fireHeight)})}cameraRectangleUpdate(e){const{longitude:t,latitude:i}=r.Cartesian.offset2(e.beginLongitude,e.beginLatitude),{longitude:a,latitude:o}=r.Cartesian.offset2(e.endLongitude,e.endLatitude);this._camera.flyTo({destination:n.Rectangle.fromDegrees(t,i,a,o)})}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={domElementId:"cesiumContainer",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzODAwZjJkYS02MmMyLTRhYjctYjZlMy04N2JiNDY5Mjg0M2IiLCJpZCI6MjQ0MTMsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1ODUxOTM5MDN9.ImztRbucAywyYtlbPc2pxo_H4dnMAlOn1SZv2z4bAlU",defaultLocation:{beginLongitude:113.392365,beginLatitude:23.062595,endLongitude:113.393895,endLatitude:23.063395},map:{},sourceIP:"",buildModuleUrl:"https://cesium.com/downloads/cesiumjs/releases/1.70.1/Build/Cesium/Source",fireHeight:888,horizon:1,debug:!1,variable:{zone:[]},version:"1.0",showMap:!0}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0),r=i(1);class a{constructor(e,t){this.viewer=e,this.handler=t}addSprite(e){const{longitude:t,latitude:i}=r.Cartesian.offset2(e.location.longitude,e.location.latitude),a={name:"sprite",position:n.Cartesian3.fromDegrees(t,i,r.mapConfig.horizon),billboard:{image:e.ionSrc,scale:.1,width:256,height:256,distanceDisplayCondition:new n.DistanceDisplayCondition(0,2250)},label:{text:"起火位置",font:"14pt monospace",fillColor:n.Color.YELLOW,style:n.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:n.VerticalOrigin.TOP,pixelOffset:new n.Cartesian2(0,32)},point:{pixelSize:12,color:n.Color.RED,distanceDisplayCondition:new n.DistanceDisplayCondition(2250,99999999)}},o=this.viewer.entities.add(a);this.hander(o,e)}hander(e,t){this.handler.setInputAction(i=>{var r=this.viewer.scene.pick(i.position);n.defined(r)&&r.id===e&&t.handleEvent(t.item)},n.ScreenSpaceEventType.LEFT_CLICK)}}},function(e,t){e.exports=require("fetch-jsonp")},function(e,t,i){"use strict";i.r(t);var n=i(9);for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r)},function(e,t){},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(0),r=i(5);class a{constructor(e){this.viewer=e,this.viewer.cesiumWidget.creditContainer.style.display="none",this.init(),this.debug()}debug(){this.viewer.scene.debugShowFramesPerSecond=r.a.debug}init(){r.a.debug&&console.log(this.viewer),this.viewer.scene.skyBox&&(this.viewer.scene.skyBox.show=!1),this.viewer.scene.screenSpaceCameraController.enableTilt=!1,this.viewer.scene.screenSpaceCameraController.enableLook=!0,this.viewer.scene.screenSpaceCameraController.enableRotate=!0,this.viewer.scene.screenSpaceCameraController.enableTranslate=!0,this.viewer.scene.screenSpaceCameraController.enableZoom=!0,this.viewer.scene.globe.maximumScreenSpaceError=4/3,this.viewer.scene.globe.baseColor=n.Color.BLACK,this.viewer.scene.sun=new n.Sun,this.viewer.scene.sun.show=!1,this.viewer.scene.moon=new n.Moon({show:!1}),this.addLayer()}addLayer(){}addTileMapServiceImageryProvider(e,t="jpg"){const i=this.viewer.scene.imageryLayers.addImageryProvider(new n.TileMapServiceImageryProvider({url:e,fileExtension:t}));i.brightness=1.4,i.saturation=1.8}}i(3);var o=i(4),s=i(2),c=i(6);i(14);n.buildModuleUrl.setBaseUrl(s.mapConfig.sourceIP+s.mapConfig.buildModuleUrl);class u{constructor(){this.viewer=new n.Viewer(s.mapConfig.domElementId,{selectionIndicator:!1,animation:!1,timeline:!1,fullscreenButton:!1,infoBox:!1,homeButton:!1,baseLayerPicker:!1,navigationHelpButton:!1,geocoder:!1,sceneModePicker:!1,scene3DOnly:!0,requestRenderMode:!0,maximumRenderTimeChange:1/0}),this.beginLongitude=s.mapConfig.defaultLocation.beginLongitude,this.beginLatitude=s.mapConfig.defaultLocation.beginLatitude,this.endLongitude=s.mapConfig.defaultLocation.endLongitude,this.endLatitude=s.mapConfig.defaultLocation.endLatitude,this.addSprite=e=>{new c.a(this.viewer,this.handler).addSprite(e),this.cameraController.cameraUpdate(e.location)},this.cameraRectangleUpdate=e=>{this.cameraController.cameraRectangleUpdate(e)},this.viewerObject=new a(this.viewer),this.cameraController=new o.a(this.viewer),this.handler=new n.ScreenSpaceEventHandler(this.viewer.canvas)}onStartUp(){}createViewer(){}addTileMapServiceImageryProvider(e,t="jpg"){this.viewerObject.addTileMapServiceImageryProvider(e,t)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(7),r=i.n(n);class a{static async getPoint(e,t="UDlMuhOMfdTRVKqtQqLiKg8oH6Lxnagt"){const i=["https://api.map.baidu.com/place/v2/search?","query=",e,"&region=","中国","&output=json&ak=",t].join("");return r()(i).then(e=>e.json())}static async getAddress(e=121.49884033194,t=31.225696563611,i="UDlMuhOMfdTRVKqtQqLiKg8oH6Lxnagt"){const n="https://api.map.baidu.com/reverse_geocoding/v3/?ak="+i+"&output=json&coordtype=wgs84ll&location="+String(t)+","+String(e);return r()(n).then(e=>e.json())}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.init=()=>{},this.loadEnd=()=>{},this.exit=()=>{},this.div=e}static registerProvider(e,t){this._Factories.set(e,t)}static createProvider(e){const t=this._Factories.get(e);if(t)return t(e)}}n._Factories=new Map},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{static offset2(e,t){return{longitude:e+this._offsetLongitude,latitude:t+this._offsetLatitude}}}n._offsetLongitude=0,n._offsetLatitude=0},function(e,t){e.exports=require("cesium/Source/Widgets/widgets.css")}])}));